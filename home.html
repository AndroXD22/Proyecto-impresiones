<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Control de Impresiones</title>
    <link rel="stylesheet" href="home.css">
    <link rel="icon" href="icono1-removebg-preview.ico">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="branding">
                <img src="logo_mercantil2-removebg-preview.png" alt="logo">
                <h1>Control de Impresiones</h1>
            </div>
            <div class="header-info">
                <div class="date-display">
                    <span id="current-date"></span>
                </div>
                <div class="quick-stats">
                    <span><i class="fas fa-print"></i> 24 impresiones hoy</span>
                </div>
            </div>
        </div>
    </header>
    
    <script>
        document.getElementById('current-date').textContent = new Date().toLocaleDateString();
    </script>
    
    <nav>
        <div class="container">
            <ul class="nav-menu">
                <li><a href="home.html">inicio</a></li>
                <li><a href="registro_impresiones.html">Registro de Impresiones</a></li>
                <li><a href="registro_irregularidades.html">Irregularidades</a></li>
                <li><a href="#">Usuarios</a></li>
                <li><a href="ubicaciones.html">Ubicaciones</a></li>
                <li><a href="#">Configuración</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="container">
        <div class="dashboard">
            <!-- Estadísticas principales -->
            <div class="card stat-card">
                <div class="card-body">
                    <div class="stat-value">1,248</div>
                    <div class="stat-label">Impresiones hoy</div>
                    <div class="text-success">↑ 12% vs promedio</div>
                </div>
            </div>
            
            <div class="card stat-card">
                <div class="card-body">
                    <div class="stat-value">8.2</div>
                    <div class="stat-label">Páginas por impresión</div>
                    <div class="text-danger">↑ 23% vs promedio</div>
                </div>
            </div>
            
            <div class="card stat-card">
                <div class="card-body">
                    <div class="stat-value">42</div>
                    <div class="stat-label">Alertas hoy</div>
                    <div class="text-warning">↑ 5% vs ayer</div>
                </div>
            </div>
            
            <div class="card stat-card">
                <div class="card stat-card">
                    <div class="card-body">
                        <div class="stat-value">B583314</div>
                        <div class="stat-label">Usuario más activo</div>
                        <div class="text-danger">128 páginas hoy</div>
                    </div>
                </div>                
            </div>
            
            <!-- Gráfico principal -->
            <div class="card main-chart">
                <div class="card-header">
                    <h3 class="card-title">Impresiones por día (últimos 30 días)</h3>
                </div>
                <div class="card-body">
                    <canvas id="impressionsChart" width="400" height="200"></canvas>
                </div>
            </div>
            
            <!-- Irregularidades -->
            <div class="card irregularities">
                <div class="card-header">
                    <h3 class="card-title">Irregularidades detectadas</h3>
                    <button class="btn btn-primary btn-sm" href="registro_irregularidades.html">Ver todas</button>
                </div>
                <div class="card-body">
                    <div class="alert alert-danger">
                        <div class="alert-icon">!</div>
                        <div>
                            <strong>Usuario B583314</strong> - 3 impresiones con más de 100 páginas
                            <div class="text-muted">Hace 2 horas</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <div class="alert-icon">!</div>
                        <div>
                            <strong>P33</strong> - 45% sobre el promedio
                            <div class="text-muted">Hace 4 horas</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-danger">
                        <div class="alert-icon">!</div>
                        <div>
                            <strong>Concresa</strong> - Posible mal uso
                            <div class="text-muted">Hoy, 09:15 a.m</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <div class="alert-icon">!</div>
                        <div>
                            <strong>Día inusual</strong> - Lunes con 25% menos impresiones
                            <div class="text-muted">Ayer, 5:30 p.m</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Estadísticas por departamento -->
            <div class="card department-stats">
                <div class="card-header">
                    <h3 class="card-title">Impresiones por departamento</h3>
                    <select>
                        <option>Este mes</option>
                        <option>Esta semana</option>
                        <option>Hoy</option>
                    </select>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Departamento</th>
                                <th>Impresiones</th>
                                <th>Páginas</th>
                                <th>Variación</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Departamento 1</td>
                                <td>1,842</td>
                                <td>15,328</td>
                                <td class="text-danger">+32%</td>
                                <td><span class="badge badge-danger">Alerta</span></td>
                            </tr>
                            <tr>
                                <td>Departamento 2</td>
                                <td>1,205</td>
                                <td>9,840</td>
                                <td class="text-success">-5%</td>
                                <td><span class="badge">Normal</span></td>
                            </tr>
                            <tr>
                                <td>Departamento 3</td>
                                <td>2,451</td>
                                <td>18,925</td>
                                <td class="text-warning">+15%</td>
                                <td><span class="badge badge-warning">Observar</span></td>
                            </tr>
                            <tr>
                                <td>Departamento 4</td>
                                <td>892</td>
                                <td>6,125</td>
                                <td class="text-success">-12%</td>
                                <td><span class="badge">Normal</span></td>
                            </tr>
                            <tr>
                                <td>Departamento 5</td>
                                <td>3,124</td>
                                <td>24,856</td>
                                <td class="text-danger">+28%</td>
                                <td><span class="badge badge-danger">Alerta</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Actividad reciente -->
            <div class="card recent-activity">
                <div class="card-header">
                    <h3 class="card-title">Actividad reciente</h3>
                    <button class="btn btn-primary btn-sm">Exportar</button>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Hora</th>
                                <th>Carnet</th>
                                <th>Páginas</th>
                                <th>Detalles</th>
                                <th>Impresora</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10:15 a.m</td>
                                <td>JR125</td>
                                <td class="text-danger">128</td>
                                <td>Reporte_final.pdf</td>
                                <td>TBMP31L1</td>
                            </tr>
                            <tr>
                                <td>10:12 a.m</td>
                                <td>MG542</td>
                                <td>2</td>
                                <td>Factura_1254.pdf</td>
                                <td>TBMP31L1</td>
                            </tr>
                            <tr>
                                <td>10:05 a.m</td>
                                <td>AB321</td>
                                <td class="text-danger">96</td>
                                <td>Presentacion.pptx</td>
                                <td>TBMP31L1</td>
                            </tr>
                            <tr>
                                <td>09:58 a.m</td>
                                <td>TC789</td>
                                <td>12</td>
                                <td>Contrato.docx</td>
                                <td>TBMP31L1</td>
                            </tr>
                            <tr>
                                <td>09:45 a.m</td>
                                <td>JR125</td>
                                <td class="text-danger">112</td>
                                <td>Anexos.pdf</td>
                                <td>TBMP31L1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
    <script>
    const labels = [];
    const dataValues = [];

    const today = new Date();
    for (let i = 29; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(today.getDate() - i);
        labels.push(date.toLocaleDateString('es-ES', { day: '2-digit', month: 'short' }));
        // Simulación de datos
        dataValues.push(Math.floor(Math.random() * 100) + 50); // entre 50 y 150 impresiones
    }

    const promedio = dataValues.reduce((acc, val) => acc + val, 0) / dataValues.length;
    const promedioData = new Array(dataValues.length).fill(promedio);

    const ctx = document.getElementById('impressionsChart').getContext('2d');
    const impressionsChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [
                {
                    label: 'Impresiones por día',
                    data: dataValues,
                    borderColor: '#007bff',
                    backgroundColor: 'rgba(0, 123, 255, 0.1)',
                    tension: 0.3,
                    fill: true
                },
                {
                    label: 'Promedio',
                    data: promedioData,
                    borderColor: '#ff0000',
                    borderDash: [10, 5],
                    pointRadius: 0,
                    fill: false
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Fecha'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Cantidad de impresiones'
                    },
                    beginAtZero: true
                }
            }
        }
    });
</script>
</body>
</html>